{"version":3,"file":"10.js","sources":["webpack:///./js/components/auth/login.js"],"sourcesContent":["import React from \"react\";\nimport { Form } from \"semantic-ui-react\";\nimport { connect } from \"react-redux\";\nimport { post } from \"utils\";\nimport { setLoginStatus } from \"actions/config\";\nimport { toast } from \"react-toastify\";\nimport { withRouter } from \"react-router-dom\";\n\nclass LoginForm extends React.PureComponent {\n  state = { email: \"\", password: \"\" }\n\n  onChange = (e, {name, value}) => this.setState({[name]: value})\n\n  submit = async () => {\n    const postBody = {\n      email: this.state.email,\n      password: this.state.password\n    }\n\n    let response = await post(\"/auth/login\", postBody);\n    let json = response.json();\n    if (json.error) {\n      toast.error(json.error);\n      this.props.setLoginStatus(false);\n    } else {\n      toast.success(\"Logged in\");\n      this.props.setLoginStatus(true); \n      this.props.history.push(\"/web/\");\n    }\n  }\n\n  render() {\n    return (\n      <Form inverted>\n        <Form.Input\n          name=\"email\"\n          label=\"Email\"\n          placeholder=\"my_user@mydomain.net\"\n          onChange={this.onChange}\n        />\n        <Form.Input\n          type=\"password\"\n          name=\"password\"\n          label=\"Password\"\n          onChange={this.onChange}\n        />\n\n        <Form.Button\n          color=\"black\"\n          content=\"Submit\"\n          onClick={this.submit}\n        />\n      </Form>\n    );\n  }\n}\n\nconst mapDispatchToProps = ({\n  setLoginStatus\n});\n\nexport default withRouter(connect(null, mapDispatchToProps)(LoginForm));\n"],"mappings":"AAAA","sourceRoot":""}