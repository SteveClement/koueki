{"version":3,"file":"8.js","sources":["webpack:///./js/components/events/new.js"],"sourcesContent":["import React from \"react\";\nimport { Form } from \"semantic-ui-react\";\nimport { post, format_error } from \"utils\";\nimport moment from \"moment\";\nimport { toast } from \"react-toastify\";\nimport EventForm from \"events/form\";\n\nexport default class NewEvent extends React.PureComponent {\n  state = {\n    info: \"\",\n    date: moment().format(\"YYYY-MM-DD\"),\n    threat_level_id: 4,\n    analysis: 0,\n  }\n\n  onChange = (e, {name, value}) => this.setState({[name]: value})\n\n  submit = async () => {\n    let resp = await post(\"/v2/events/\", this.state);\n    let json = await resp.json();\n    if (resp.status == 201) {\n      toast.success(`Event ${json.id} created, redirecting...`);\n      this.props.history.push(`/web/events/${json.id}`);\n    } else {\n      toast.error(`Server says: ${resp.status}`);\n      toast.error(format_error(json));\n    }\n  }\n\n  render() {\n    return (\n        <EventForm\n            value={this.state}\n            onChange={this.onChange}\n            onSubmit={this.submit}\n        />            \n    );\n  } \n}\n\n"],"mappings":"AAAA","sourceRoot":""}